---
title: Cockpit 264
author: garrett
date: '2022-02-23'
tags: cockpit, machines, podman
slug: cockpit-264
category: release
summary: ''
---

Cockpit is the [modern Linux admin interface](https://cockpit-project.org/).
We release regularly.

Here are the release notes from Cockpit 264, cockpit-machines 262, and cockpit-podman 43:


## webserver: add support for X-Forwarded-For

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/16958>
{:.warn}

Add a "forwarded for" header option to cockpitwebserver, and wire it through from the config file in cockpit-ws.  Add docs and unit tests.  Also verify that this is working as part of our existing nginx reverse proxy test.

Fixes #16927

## Manifest overrides in /etc and ~/.config directories

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/16884>
{:.warn}

[Manifest override files](https://cockpit-project.org/guide/latest/packages.html#package-replace) are a way to customize or hide Cockpit's page menu entries. Until now these needed to be put next to the `manifest.json` which they modify, for example `/usr/share/cockpit/systemd/override.json`. However, `/usr/share/` is package manager territory,  and admins should not (and in some cases even cannot) write files there. With this Cockpit version, these overrides can now be placed into `/etc/cockpit/systemd.override.json` for global customizations, or `~/.config/cockpit/systemd.override.json` for user specific ones.

## Metrics: Show busiest CPU core

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/16686>
{:.warn}

On multi-core systems, the Metrics page now shows an additional usage bar for the CPU core with the highest usage. This points out bottlenecks and performance problems which happen because only a few cores (or even a single one) get fully used, while many others are mostly idle. In that case, the average CPU usage will be low.

![screenshot of show busiest cpu core]({{ site.baseurl }}/images/264-metrics-show-busiest-cpu-core.png)

## bridge: Add channel redirection

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/14641>
{:.warn}

This adds a "redirect" option to the open command, which takes the name
of the channel the output of the new one will be redirected to. The
redirect is effectively applied as close to the channels as possible.

Closes #14560

---

There are two cases in which the output is redirected from a channel:
- The output is redirected from a local channel. This is handled in `CockpitRouter` by setting the `redirect_target` property of `CockpitChannel`, which uses it to send data to the redirect target instead of the transport in `cockpit_channel_actual_send`.
- The output is redirected from a peer. This is handled in `cockpit_peer_handle` by passing the redirect target as an argument and then by putting the redirect into a hash table with the (source) channel name as a key. `on_other_recv` then looks up the channel name in the table, again sending it to the redirect target instead of the transport if a corresponding entry is present.

Similarly there are two redirect target types: a local channel and a peer. These are handled by different implementations of the `CockpitRedirect` interface - `CockpitChannelRedirect` for local channels (holding a reference to the corresponding `CockpitChannel` object) and `CockpitPeerRedirect` for peers (holding a reference to the transport and the channel name).

Redirection of a channel is attempted on all bridges - the shortest path then takes precedence (e.g. if there is a redirect between two channels on the same peer, it happens on both the parent bridge and the peer, but effectively the data is redirected on the peer and nothing arrives on the parent). This also means it is compatible with older versions of cockpit-bridge - they simply ignore the redirect option and the redirect is done on the parent bridge (this can obviously be slower, but it will work).

I hope this makes sense - it seems like a small, but useful feature to me. (For potential uses see the linked issue.)

## Machines: WiP: Redesign VM Creation dialog

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-machines/pull/560>
{:.warn}

The VM creation dialog has started to become overfilled. At this point, it probably even blocks adding new functionalities to the dialog, e.g. Downloading RHEL images or https://github.com/cockpit-project/cockpit-machines/issues/431 .
As a solution, let's divide the content of dialog into tabs, as hinted in https://github.com/cockpit-project/cockpit-machines/issues/431#issuecomment-972890349 .

Here is my first iteration:

![Screenshot from 2022-02-07 13-26-02]({{ site.baseurl }}/images/264-machines-wip-redesign-vm-creation-dialog.png)
![Screenshot from 2022-02-07 13-26-09]({{ site.baseurl }}/images/264-machines-wip-redesign-vm-creation-dialog-2.png)
![Screenshot from 2022-02-07 13-26-17]({{ site.baseurl }}/images/264-machines-wip-redesign-vm-creation-dialog-3.png)
![Screenshot from 2022-02-07 13-26-23]({{ site.baseurl }}/images/264-machines-wip-redesign-vm-creation-dialog-4.png)
![Screenshot from 2022-02-07 13-26-38]({{ site.baseurl }}/images/264-machines-wip-redesign-vm-creation-dialog-5.png)

## Machines: Disk serial number

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-machines/pull/556>
{:.warn}

Normally QEMU just makes up an arbitrary serial number on the fly. However,
there are many reasons why users might want to specify a stable serial
number:
- User might have licensed functionality inside the VM tied to a specific
disk serial number (most common with Windows guests)
- Setting up multipath storage (https://sharkcz.livejournal.com/12846.html)
- This disk will be identifieable from inside the guest by /dev/disk/by-id.
... and probably more

There are certain limitations about what the serial number must look like.
1. Libvirt specifies that it must match regex test: [A-Za-z0-9_\.\+\- ]+
2. Various disk types and hypervisors have limitation on length:
"IDE/SATA devices are commonly limited to 20 characters. SCSI devices
depending on hypervisor version are limited to 20, 36 or 247 characters."

Fixes: https://bugzilla.redhat.com/show_bug.cgi?id=2036330

![Screenshot from 2022-02-04 14-24-07]({{ site.baseurl }}/images/264-machines-disk-serial-number.png)
![Screenshot from 2022-02-04 14-07-31]({{ site.baseurl }}/images/264-machines-disk-serial-number-2.png)
![Screenshot from 2022-02-04 14-09-27]({{ site.baseurl }}/images/264-machines-disk-serial-number-3.png)
![Screenshot from 2022-02-04 14-09-11]({{ site.baseurl }}/images/264-machines-disk-serial-number-4.png)

## Podman: Update ContainerDetails.jsx

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-podman/pull/923>
{:.warn}

Add Network, Volumes and Environment sections to Detailed view

## Support for health checks

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-podman/pull/897>
{:.warn}

It is now possible to set up, inspect and trigger health checks for container. Also the most recent history as well as overall status are presented.

![Screenshot from 2022-02-04 10-41-59]({{ site.baseurl }}/images/264-support-for-health-checks.png)


## Try it out

Cockpit 264, cockpit-machines 262, and cockpit-podman 43 are available now:

* [For your Linux system](https://cockpit-project.org/running.html)

* [Cockpit Source Tarball](https://github.com/cockpit-project/cockpit/releases/tag/264)
* [Cockpit Fedora 36](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit)
* [Cockpit Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F34&packages=cockpit)
* [Cockpit Client](https://flathub.org/apps/details/org.cockpit_project.CockpitClient)
* [cockpit-machines Source Tarball](https://github.com/cockpit-project/cockpit-machines/releases/tag/262)
* [cockpit-machines Fedora 36](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit-machines)
* [cockpit-machines Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F34&packages=cockpit-machines)
* [Cockpit Client](https://flathub.org/apps/details/org.cockpit_project.CockpitClient)
* [cockpit-podman Source Tarball](https://github.com/cockpit-project/cockpit-podman/releases/tag/43)
* [cockpit-podman Fedora 36](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit-podman)
* [cockpit-podman Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F34&packages=cockpit-podman)
* [Cockpit Client](https://flathub.org/apps/details/org.cockpit_project.CockpitClient)

*[CPU]: Central Processing Unit, the "brain" of a computer
*[RHEL]: Red Hat Enterprise Linux
*[SATA]: Serial "Advanced Technology" Attachment, a bus interface to attach storage devices to a computer
*[SCSI]: Small Computer System Interface, commands and protocols for communication with (mainly storage) devices
*[VM]: Virtual Machine