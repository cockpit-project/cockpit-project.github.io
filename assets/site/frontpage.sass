$frontpage-content-breakpoint: 42rem

html.front-page
  > body

    @supports (display: grid)
      display: grid
      grid-template-rows: auto auto 1fr

  .masthead
    margin-bottom: 0

    @supports (display: grid)
      grid-column: 1
      grid-row: 1

      a
        color: #fff

  .page-content
    padding-top: 2rem

    > .wrapper
      position: relative

  .intro-background
    background: url(../images/site/bg-triangles.png) no-repeat, linear-gradient(175deg, #0087a8 3rem, #0d5e8e 70%)
    background-size: cover
    background-position: 50% 0
    grid-column: 1
    grid-row: 1/3
    z-index: 1

  .masthead,
  .intro
    z-index: 2

  .intro-background,
  .intro
    clip-path: polygon(0 0, 0 calc(100% - 32px), 100% 100%, 100% 0)

  .intro
    font-family: $headline-font
    font-size: 24px
    line-height: 1.4
    background: url(../images/site/planes.svg) no-repeat left bottom
    background-size: auto 4.25rem
    background-position: calc((100vw - 65rem)/2 - 11rem) 100%
    z-index: 10
    min-height: 220px

    a
      color: inherit
      font-weight: bold
      text-decoration: underline

    @supports (clip-path: polygon(0 0, 0 0, 0 0, 0 0))
      background-position: calc((100vw - 65rem)/2 - 11rem) calc(100% - 25px)

      @media screen and (min-width: $on-laptop)
        .side-left
          top: -0.5rem
          position: relative

    @supports (display: grid)
      grid-column: 1
      grid-row: 2
      color: #eeeeec

    .side-left
      padding: 3rem 1rem 1rem
      text-align: center

      //p
        max-width: 60ex

      @media screen and (min-width: $content-width)
        padding: 1rem

        p
          max-width: 36ex

    .intro-image
      position: relative
      margin-top: 2rem

      .screenshot
        margin: 0.5rem 0 0
        max-height: 12rem
        overflow: hidden
        display: block

      &:before
        z-index: 100
        content: ''
        position: absolute
        width: 100%
        height: 100%
        box-shadow: inset 0px -20px 15px -15px rgba(0,0,0,0.2)
        pointer-events: none

    p:first-child:last-child
      margin: 0 0.5rem

    .grid > div
      padding-bottom: 0

    ul, li
      margin: 0
      padding: 0
      list-style: none
      display: inline

    %btn
      display: inline-block
      background: #eeeeec
      border-radius: 6px
      box-shadow: 0 3px 0 rgba(46, 61, 86, 1)
      color: #3e5375
      font-size: 18px
      line-height: 1.33
      margin: 10px 10px 20px 0px
      padding: 10px 16px

      &:hover
        text-decoration: none
        background: white
        color: #333

    li a
      @extend %btn

    li.with-img img
      vertical-align: top
      margin: -1px 2px 0 0

  .blurbs
    margin: 1rem 0 4rem

    .blurb
      display: grid
      align-items: flex-start

      @media (min-width: $frontpage-content-breakpoint)
        grid-template-columns: 1fr 2fr
        grid-gap: 2rem 1.5rem

        h3
          margin: 0
          position: relative
          top: -0.75rem

      @media (max-width: #{$frontpage-content-breakpoint})

        h3
          padding-top: 2rem

      h2
        font-size: 2.5rem
        grid-column: 1 / -1

      &:not(:first-child)

        h2
          margin-top: 4rem

      h3
        font-size: 1.5rem
        grid-column: 1
        color: #777

        + p, + ul, + ol
          margin-top: 0

      p, ul, ol
        grid-column: 2 / -1

        @media (min-width: $frontpage-content-breakpoint)
          /* Rely on vertical grid gap instead */
          margin-top: -2rem
          position: relative

      .screenshot
        // Automatically size multiple screenshots to the max width
        display: grid
        grid-template-columns: repeat(auto-fit, minmax(30%, 1fr))
        grid-gap: 0.5rem

        > a
          border: 2px solid #ccc
          border-radius: 2px

        img
          display: flex

    @media (min-width: $frontpage-content-breakpoint)
      h3
        border-bottom: 1px dashed #aaa

  footer.footer-cockpit
    margin-top: 0

  .badge
    $badge-color: #fbeabc
    $badge-color-border: #f0ab00
    position: absolute
    right: 3em
    top: calc(-8rem + 1vw)
    z-index: 10
    line-height: 1.4
    text-align: center
    font-size: 0.85rem

    @media screen and (min-width: #{$content-width})
      right: -2em

    &-new,
    &-version,
    &-date
      display: block
      opacity: 0.8

    &-new
      font-weight: inherit

    &-version
      font-size: 130%
      font-weight: bold

    a
      transition: all 100ms
      background: $badge-color
      border-radius: 100%
      border: 1px solid $badge-color-border
      box-shadow: 6px 6px 6px inset rgba(255,255,255,0.5), 4px 4px 12px rgba(0,0,0,0.125)
      display: block
      padding: 1.25em 1.75em
      text-decoration: none !important
      color: #333 !important

      &:hover
        > span
          opacity: 1

        > .badge-version
          text-decoration: underline
