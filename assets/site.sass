// Our variables
$base-font-family: RedHatText, 'Open Sans', 'PT Sans', 'Helvetica Neue', Helvetica, Arial, Liberation Sans, sans-serif
$base-font-size: 1.125rem
$base-font-weight: 400
$small-font-size: $base-font-size * 0.875
$base-line-height: 1.5

$spacing-unit: 1rem

$text-color: #333
$background-color: #fff
$brand-color: #255ccb

$grey-color: #828282
$grey-color-light: lighten($grey-color, 40%)
$grey-color-dark: darken($grey-color, 25%)

// Width of the content area
$content-width: 65rem

// Redefine laptop breakpoint
$on-laptop: 52rem

// Import fonts
@import site/fonts

// Import partials from the `minima` theme.
@import minima
// Unset parts of minima (currently styled tables)
@import lib/minima-unset

// Import grid (see http://gridlex.devlint.fr/ for docs)
//@import vendor/gridlex

// Styles for the search page
@import lib/search
// Default blog style
@import lib/blog
// Blog pagination
@import lib/pagination
// Stretch page with footer on bottom
@import lib/stickyfooter
// Stop page shift by keeping scrollbar on
@import lib/scrollbar-on

$headline-font: RedHatDisplay, Cantarell, 'Roboto Slab', 'Helvetica Neue', Helvetica, Arial, Liberation Sans, sans-serif

$gutter-width: calc((100vw - 65rem) / 2)

$link-color: #255ccb
$link-color-visited: lighten(desaturate(mix($link-color, purple, 50%), 20%), 20%)
$link-color-hover: lighten($link-color, 15%)

// Import site pieces
@import site/guide
@import site/animation
@import site/frontpage

h1, h2, h3, h4, h5, h6, blockquote, dl, ol, ul, figure, p, pre
  margin-bottom: 1rem

.page-content,
.cockpit-guide .book,
.cockpit-guide .chapter

  a[href]

    &:link, &:visited, &:hover
      text-decoration: underline

    &:link
      color: $link-color

    &:visited
      color: $link-color-visited

    &:hover
      color: $link-color-hover

.page-content
  padding-top: 4rem

  > .wrapper
    padding-left: 1.5rem
    padding-right: 1.5rem

  dl
    margin: 1em

    dt
      font-weight: bold
      margin-top: 2em

      &:first-child
        margin-top: 1em

    dd
      margin: 1em 2em

  ul, ol
    margin-left: 1.5rem

h1, h2, h3, h4, h5, h6
  font-family: $headline-font

\:root
  --accent-color: rgba(0,0,0, 0.6)
  --accent-color-highlight: rgba(0,0,0, 0.4)
  --accent-color-background: transparent
  --accent-color-links: var(--accent-color)

html:not(.front-page)
  --accent-color: #255ccb
  --accent-color-highlight: #8ba9ff

//html[class*=-path-search]

html[class*=-Contributing] .nav--contribute,
html[class*=-path-blog] .nav--blog,
html.-path-running .nav--try-it-out,
html.-path-running .nav--install,
html.-path-documentation .nav--documentation,
html.cockpit-guide .nav--documentation,
html[class*=-path-search] .nav--search

  a
    background: linear-gradient(to top, var(--accent-color) 3px, var(--accent-color-highlight) 3px)

    @media screen and (min-width: $on-laptop)
      background: linear-gradient(to top, #999 10px, transparent 10px)
      background: linear-gradient(to top, var(--accent-color-highlight) 10px, transparent 10px)

header.masthead
  $logo-height: 48px
  $logo-width: 272px
  $header-bg: rgba(black, 0.6)
  $header-line: 10px
  padding: 0
  margin: 0
  color: white
  display: flex
  line-height: $logo-height
  position: relative
  background: var(--accent-color-background)

  h1
    background: $header-bg
    background: var(--accent-color)

    .logo
      height: $logo-height
      width: $logo-width

      @media screen and (min-width: $on-laptop)
        display: block

  a
    padding: calc(1rem - #{$header-line}) 1rem 0.75rem
    display: block
    color: var(--accent-color-links)

  .hgroup,
  .nav-wrap
    flex: auto
    font-family: $headline-font

  h1,
  ul
    margin: 0

  .nav-menu

    &, & li
      list-style: none
      margin: 0
      padding: 0

  li.nav--home
    display: none !important

  .nav-wrap ul
    display: flex
    justify-content: space-evenly
    text-align: center
    flex-flow: wrap

    li
      flex: auto

    @media screen and (max-width: #{$on-laptop})
      background: var(--accent-color-highlight)
      line-height: 1

      li
        min-width: 5em

  @media screen and (min-width: $on-laptop)
    border-top: $header-line solid $header-bg
    border-top: $header-line solid var(--accent-color)
    padding: 0 $gutter-width
    align-items: space-between

    .hgroup
      flex: none

    .nav-wrap
      margin: 0 1rem

  @media screen and (max-width: #{$on-laptop})
    flex-direction: column

    .logo
      margin-bottom: 1rem

    .hgroup,
    .nav-wrap
      text-align: center
      width: 100%
      margin: 0

    .hgroup a
      padding: 1rem 1rem 0
      display: block

    .nav-wrap
      line-height: $logo-height

      a
        padding: 1rem 2ex

pre
  white-space: pre-wrap

html.running-cockpit
  .os-instructions
    display: none
    margin-top: 10px

  .support-table
    border-collapse: collapse
    margin-top: -1rem
    max-width: 100%
    overflow: hidden

    a
      display: block
      line-height: 3rem
      padding: 0.5ch 2ch

    img
      min-width: 120px
      max-width: 200px
      line-height: 3rem

    tr:nth-child(odd) td
      background: #f6f6f6

    th
      font-weight: normal
      color: #707070

    td
      padding: 0
      border: 1px solid #ddd

      // Checkmarks
      &:not(:first-child):not(:last-child)
        text-align: center
        font-size: 2rem
        color: #228747
        width: 7ch

      &:last-child
        width: 0
        white-space: nowrap

    @media screen and (max-width: 46rem)
      a
        padding: 1ch

      th:not(:first-child)
        font-size: 0.85rem
        transform: rotate(-30deg)
        height: 3rem
        padding: 0
        width: 7ch
        max-width: 7ch

      td:not(:first-child):not(:last-child)
        font-size: 32px

      th:last-child, td:last-child
        display: none

  h4
    margin-top: 3em
    font-size: 22px

  .browser-support,
  .os-list
    li
      list-style: none

  ol
    li
      > p
        margin: 0 0 1rem

        + p
          margin-top: 1rem

      &:not(:first-child)
        margin-top: 2rem

.browser-header
  text-align: center
  background: linear-gradient(transparent calc(50% - 1px), #babdb6 50%, transparent calc(50% + 1px))
  margin: 3rem 0 2rem

  h2
    color: #75786d
    font-size: 16px
    text-align: center
    display: inline

    background: #fff
    padding: 1ex

.side-by-side
  display: flex
  align-items: start
  grid-gap: 0.5rem

  > img
    max-width: 100%
    height: auto
    margin: 0 !important

img.screenshot,
a.screenshot img,
p.screenshot img
  border: 1px solid #d3d7cf

.image-container
  position: fixed
  left: 0
  top: 0
  right: 0
  bottom: 0
  z-index: 1000
  display: flex
  flex-direction: column
  align-content: center
  padding: 1rem

  &:before
    display: block
    content: ''
    position: absolute
    left: 0
    top: 0
    right: 0
    bottom: 0
    background: rgba(#000, 0.7)
    animation: 200ms fadeIn
    z-index: -1

  img
    margin: auto auto 0
    max-width: 100%
    max-height: 100%
    animation: 300ms ease-in-out fadeIn, 300ms ease-in-out zoomWidth
    border: 1px solid #333
    box-shadow: 0 6px 12px rgba(#000, 0.25)

  p
    background: rgba(#000, 0.5)
    border-radius: 3ex
    color: #fff
    margin: 1ex auto auto
    padding: 0.5ex 2ex
    text-shadow: 1px 1px 3px #000
    animation: 300ms ease-in-out fadeIn
    text-align: center

.zoom
  cursor: zoom-in

.zoom-out
  cursor: zoom-out

abbr
  cursor: help
  // Webkit does not support combining these values with a shorthand text-decoration
  text-decoration: underline
  text-decoration-color: #aaa
  text-decoration-skip-ink: none
  text-decoration-style: wavy
  text-decoration-thickness: 1px
  text-underline-offset: 0.2em

a > abbr
  text-decoration-color: #fff
  text-decoration-style: dotted
  text-decoration-thickness: 2px

footer.footerlinks
  background: #eeeeec
  border-top: 1px solid #d3d7cf
  border-bottom: 1px solid #d3d7cf
  padding: 20px 0
  font-size: 18px

  dl a,
  dt
    padding: 5px 20px

  dt
    font-weight: bold

    a
      margin: -5px -20px

  dd
    a
      padding-left: 30px

  a
    color: #093d69

    &:hover
      background: white

footer.footer-cockpit
  font-size: 0.8rem
  text-align: center
  background-color: #333
  background: var(--accent-color)
  color: rgba(white, 0.9)
  padding: 0.5em $gutter-width
  display: flex
  flex-wrap: wrap
  justify-content: space-around
  align-items: center

  @media screen and (min-width: $on-laptop)
    padding: 0.5em $gutter-width

  @media screen and (max-width: 64rem)
    > .copyright
      flex-basis: 24em

  > p
    flex-grow: 1
    margin: 0
    padding: 0.5em 1em

  a
    color: white
    font-weight: bold


.browser-support
  --browser-support-columns: 1
  display: grid
  grid-gap: 1rem
  grid-template-columns: repeat(var(--browser-support-columns), minmax(10rem, 1fr))
  margin: 1rem 0 3rem

  @media (min-width: 34rem)
    --browser-support-columns: 2
    
  @media (min-width: 48rem)
    --browser-support-columns: 3
    
  > li
    display: flex
    align-items: start

  img
    width: 2rem
    height: auto
    min-height: 2rem
    margin-right: 0.75em

  .browser-name
    // Adjust for the difference between the icon height and the text height
    // (We align to the top instead of to the center in the cases where text wraps)
    padding-top: 0.125rem

  .browser-firefox > img
    position: relative
    // Firefox's tail is slightly taller
    top: -1px

#browser-support
  &[data-browser-supported="true"] .is-not-supported,
  &:not([data-browser-supported="true"]) .is-supported
    display: none

  .is-supported,
  .is-not-supported
    padding: 1rem 2rem 1rem 1.5rem
    border-radius: 3px
    display: inline-block


  .is-supported
    background: #e6f6cc
    color: #416a00

  .is-not-supported
    background: #fcefcc
    color: #4a1000

  img
    height: 3ch
    width: auto
    margin-right: 0.5em

article

    a
      color: inherit

.post-content
  h2, h3, h4, h5, h6
    margin-top: 2em
    margin-bottom: 0.5em

.post-link
  font-size: inherit

.search-page .articles
  article.post
    margin-top: 0
    margin-bottom: 0

    h2
      margin: 0 0 0.5rem
      font-size: 150%

.search-input
  background-color: #fff
  color: #333
  border: 1px solid #999
  border-radius: 2px

  &:focus
    border-color: $link-color
    box-shadow: 0 0 2px $link-color

/* Display the article list in a grid */
@supports (display: grid)
  .blog-posts-list > .articles
    display: grid
    grid-template-columns: repeat(auto-fill, minmax(18rem, 1fr))
    grid-gap: 2rem

    > article
      margin: 0 !important

.highlighter-rouge
  margin: 1rem 0

.post-title
  letter-spacing: 0

%alert
  --background-color: #fff
  --base-color: rgb(0 149 150)
  --border-color: #ededed
  --text-color: rgb(0 55 55)
  --icon: url(/images/site/alert-default.svg)
  --icon-size: 1em
  --icon-height: var(--icon-size)
  --icon-width: var(--icon-size)
  --line-height: #{$base-line-height}
  --icon-offset: calc(((var(--line-height) * 1em) - var(--icon-size)) / 2)
  --alert-padding-y: 1rem
  --alert-padding-x: 1rem
  --alert-padding: var(--alert-padding-y) var(--alert-padding-x) var(--alert-padding-y) calc(var(--icon-width) + (var(--alert-padding-x) * 2))
  background: var(--background-color)
  color: var(--text-color)
  border: 1px solid var(--border-color)
  border-left: 3px solid var(--base-color)
  display: block
  margin: 2rem 0
  padding: var(--alert-padding)
  position: relative

  i, em
    font-style: normal

  @supports (mask: url())

    &::before
      background: var(--base-color)
      content: ''
      height: var(--icon-height)
      // Chrome is still needs -webkit- prefix for mask sizing
      -webkit-mask: var(--icon)
      -webkit-mask-size: cover
      mask: var(--icon)
      mask-size: cover
      width: var(--icon-width)
      left: var(--alert-padding-x)
      top: var(--alert-padding-y)
      display: block
      position: absolute
      margin-top: var(--icon-offset)

.info,
.note
  --icon: url(../images/site/alert-info.svg)
  --base-color: rgb(115 188 247)
  --text-color: rgb(0 67 104)
  @extend %alert

.success
  --icon: url(../images/site/alert-success.svg)
  --base-color: rgb(146 212 0)
  --text-color: rgb(72 107 0)
  @extend %alert

.warning,
.warn
  --icon: url(../images/site/alert-warning.svg)
  --base-color: rgb(240 171 0)
  --text-color: rgb(121 86 0)
  --icon-width: calc(var(--icon-height) / 16 * 18)
  @extend %alert

.danger,
.error
  --icon: url(../images/site/alert-danger.svg)
  --base-color: rgb(201 25 11)
  --text-color: rgb(163 0 0)
  @extend %alert